{
  "title": "vLLM â€” Workload Overview",
  "tags": ["llm", "vllm", "meluxina"],
  "schemaVersion": 39,
  "version": 1,
  "refresh": "5s",
  "time": { "from": "now-15m", "to": "now" },
  "panels": [
    {"id": 1, "type": "timeseries", "title": "Targets UP (vLLM)",
      "gridPos": {"h": 5, "w": 12, "x": 0, "y": 0},
      "targets": [{"refId": "A", "expr": "up{job=\"vllm-clients\"}", "legendFormat": "{{instance}}"}]},
    {"id": 2, "type": "stat", "title": "Requests (cumulative) by host",
      "gridPos": {"h": 5, "w": 12, "x": 12, "y": 0},
      "targets": [{"refId": "A", "expr": "sum by (host) (vllm_requests_total)"}],
      "options": {"reduceOptions": {"calcs": ["lastNotNull"]}}},
    {"id": 3, "type": "timeseries", "title": "Requests per second (rate 1m)",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 5},
      "targets": [{"refId": "A", "expr": "sum by (host) (rate(vllm_requests_total[1m]))", "legendFormat": "{{host}}"}]},
    {"id": 4, "type": "timeseries", "title": "Throughput (vllm_throughput_rps)",
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 5},
      "targets": [{"refId": "A", "expr": "sum(vllm_throughput_rps) by (host)", "legendFormat": "{{host}}"}]},
    {"id": 5, "type": "stat", "title": "Avg latency (s)",
      "gridPos": {"h": 5, "w": 6, "x": 0, "y": 13},
      "targets": [{"refId": "A", "expr": "avg(vllm_request_latency_seconds)"}],
      "fieldConfig": {"defaults": {"unit": "s"}},
      "options": {"reduceOptions": {"calcs": ["lastNotNull"]}}},
    {"id": 6, "type": "stat", "title": "Errors (cumulative)",
      "gridPos": {"h": 5, "w": 6, "x": 6, "y": 13},
      "targets": [{"refId": "A", "expr": "sum(vllm_errors_total)"}],
      "options": {"reduceOptions": {"calcs": ["lastNotNull"]}}},
    {"id": 7, "type": "table", "title": "Requests (cumulative) by host",
      "gridPos": {"h": 8, "w": 24, "x": 0, "y": 18},
      "targets": [{"refId": "A", "expr": "sum by (host) (vllm_requests_total)"}],
      "transformations": [{"id": "organize", "options": {"excludeByName": {"__name__": true}, "renameByName": {"host": "Host"}}}]}
  ]
}
